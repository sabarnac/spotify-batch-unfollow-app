/*! For license information please see 109.cb456910.chunk.js.LICENSE.txt */
(self.webpackChunkspotify_batch_unfollow_app=self.webpackChunkspotify_batch_unfollow_app||[]).push([[109],{19:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=s(43),n=(a=r)&&a.__esModule?a:{default:a};t.default=function(){return n.default.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10"},n.default.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"}))}},109:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var a=s(43),r=s(588),n=s(154);const i=()=>{const[,e]=(0,a.useState)(!0);return(0,a.useCallback)(()=>e(e=>!e),[])};var o=s(90),l=s(419),c=s(579);const d=e=>{let{permissionOptions:t,addPermissionOption:s,removePermissionOption:a,onClick:r}=e;return(0,c.jsxs)("div",{className:"login",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{children:"Permissions to allow"}),(0,c.jsxs)("div",{className:"permission-options",children:[(0,c.jsx)("div",{className:"unfollow-artists-users",children:(0,c.jsxs)("label",{children:[(0,c.jsx)(l.A,{checked:t.includes("artists-users"),disabled:t.includes("artists-users")&&1===t.length&&!t.includes("read-saved-tracks-episodes"),onChange:e=>e?s("artists-users"):a("artists-users")}),(0,c.jsx)("span",{children:"Read/Modify Followed Artists/Users"})]})}),(0,c.jsx)("div",{className:"unfollow-shows",children:(0,c.jsxs)("label",{children:[(0,c.jsx)(l.A,{checked:t.includes("shows"),disabled:t.includes("shows")&&1===t.length&&!t.includes("read-saved-tracks-episodes"),onChange:e=>e?s("shows"):a("shows")}),(0,c.jsx)("span",{children:"Read/Modify Followed Shows (Podcasts)"})]})}),(0,c.jsx)("div",{className:"unfollow-albums",children:(0,c.jsxs)("label",{children:[(0,c.jsx)(l.A,{checked:t.includes("albums"),disabled:t.includes("albums")&&1===t.length&&!t.includes("read-saved-tracks-episodes"),onChange:e=>e?s("albums"):a("albums")}),(0,c.jsx)("span",{children:"Read/Modify Followed Albums"})]})}),(0,c.jsx)("div",{className:"unfollow-playlists",children:(0,c.jsxs)("label",{children:[(0,c.jsx)(l.A,{checked:t.includes("playlists"),disabled:t.includes("playlists")&&1===t.length&&!t.includes("read-saved-tracks-episodes"),onChange:e=>e?s("playlists"):a("playlists")}),(0,c.jsx)("span",{children:"Read/Modify Followed Playlists"})]})}),(0,c.jsx)("div",{className:"read-saved-tracks",children:(0,c.jsxs)("label",{children:[(0,c.jsx)(l.A,{checked:t.includes("read-saved-tracks-episodes")||t.includes("shows")||t.includes("albums"),disabled:t.includes("shows")||t.includes("albums"),onChange:e=>e?s("read-saved-tracks-episodes"):a("read-saved-tracks-episodes")}),(0,c.jsx)("span",{children:"Read Saved Tracks (Used For Filtering)"})]})})]})]}),(0,c.jsx)("button",{className:"success",onClick:r,children:"Login with Spotify"})]})};var u=s(752),h=s(481);const p=new Map;const f=new Set;function v(e){for(const t of[...f])t(e)}function y(e){return"undefined"===e?void 0:JSON.parse(e)}const m=function(e,t){if(void 0===a.useSyncExternalStore)throw new TypeError('You are using React 17 or below. Install with "npm install use-local-storage-state@17".');const[s]=(0,a.useState)(null===t||void 0===t?void 0:t.defaultValue);if("undefined"===typeof window)return[s,()=>{},{isPersistent:!0,removeItem:()=>{}}];const r=null===t||void 0===t?void 0:t.serializer;return function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:JSON.stringify;if(!p.has(e)&&void 0!==t&&null===localStorage.getItem(e))try{localStorage.setItem(e,n(t))}catch(c){}const i=(0,a.useRef)({item:null,parsed:t}),o=(0,a.useSyncExternalStore)((0,a.useCallback)(t=>{const s=s=>{e===s&&t()};return f.add(s),()=>{f.delete(s)}},[e]),()=>{const s=localStorage.getItem(e);if(p.has(e))i.current={item:s,parsed:p.get(e)};else if(s!==i.current.item){let e;try{e=null===s?t:r(s)}catch(c){e=t}i.current={item:s,parsed:e}}return i.current.parsed},()=>t),l=(0,a.useCallback)(t=>{const s=t instanceof Function?t(i.current.parsed):t;try{localStorage.setItem(e,n(s)),p.delete(e)}catch(c){p.set(e,s)}v(e)},[e,n]);return(0,a.useEffect)(()=>{if(!s)return;const t=t=>{t.storageArea===localStorage&&t.key===e&&v(e)};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[e,s]),(0,a.useMemo)(()=>[o,l,{isPersistent:o===t||!p.has(e),removeItem(){p.delete(e),localStorage.removeItem(e),v(e)}}],[e,l,o,t])}(e,s,null===t||void 0===t?void 0:t.storageSync,null===r||void 0===r?void 0:r.parse,null===r||void 0===r?void 0:r.stringify)},b=(0,a.lazy)(()=>s.e(807).then(s.bind(s,807))),k=(0,a.lazy)(()=>Promise.all([s.e(408),s.e(214)]).then(s.bind(s,39))),g=(0,a.lazy)(()=>s.e(199).then(s.bind(s,199)));var w=function(e){return e.ACCESS_DENIED="access_denied",e}(w||{});const S=()=>{const[e,t]=m("permissions",{defaultValue:["artists-users"]}),s=(0,a.useMemo)(()=>new Set(e),[e]),l=(0,a.useMemo)(()=>[...new Set(e.flatMap(e=>u.dU[e]))],[e]),{data:p,loading:f,error:v,getAuth:y,logout:S}=(0,r.Z)({authorizeUrl:"https://accounts.spotify.com/authorize",scope:l.join(","),clientId:"9c6dd9b27991421a87a5bc6867705a27",redirectUri:document.location.href.replace(/\/$/,"")+"/callback",responseType:"token"}),x=i();n.Ay.resetToken=()=>{S(),x()},(0,a.useEffect)(()=>{null!==p&&void 0!==p&&p.access_token?n.Ay.userToken=p.access_token:n.Ay.userToken=void 0,x()},[p,x]);const j=(0,a.useCallback)(e=>t(t=>[...new Set([...t,e])]),[t]),C=(0,a.useCallback)(e=>t(t=>[...new Set(t.filter(t=>t!==e))]),[t]);return f?(0,c.jsx)(o.A,{text:"Logging in"}):v?(0,c.jsx)("div",{className:"login-error",children:(0,c.jsx)("div",{className:"error",children:v===w.ACCESS_DENIED?"Could not log in as access was denied during authorization process":"Could not log in due to an unknown error"})}):null!==p&&void 0!==p&&p.access_token?(0,c.jsx)(h.A.Provider,{value:{permissions:s,logout:S},children:(0,c.jsxs)(a.Suspense,{fallback:(0,c.jsx)(o.A,{}),children:[(0,c.jsx)(b,{}),(0,c.jsxs)(a.Suspense,{fallback:(0,c.jsx)(o.A,{}),children:[(0,c.jsx)(k,{}),(0,c.jsx)(g,{})]})]})}):(0,c.jsx)(d,{onClick:y,permissionOptions:e,addPermissionOption:j,removePermissionOption:C})}},154:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>n,BU:()=>r,sH:()=>a});const a="https://api.spotify.com/v1",r=50,n=new class{constructor(){this.userToken=void 0,this.resetToken=()=>{}}}},171:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r=s(43),n=(a=r)&&a.__esModule?a:{default:a};t.default=function(){return n.default.createElement("svg",{width:"14",height:"11",viewBox:"0 0 14 11"},n.default.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}))}},173:(e,t,s)=>{e.exports=s(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},419:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(575),r=s(579);const n=e=>{let{checked:t,disabled:s,onChange:n}=e;return(0,r.jsx)(a.A,{checked:t,disabled:s,onChange:e=>n(e.target.checked)})}},481:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});const a=(0,s(43).createContext)({permissions:new Set,logout:()=>{}})},497:(e,t,s)=>{"use strict";var a=s(218);function r(){}function n(){}n.resetWarningCache=r,e.exports=function(){function e(e,t,s,r,n,i){if(i!==a){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n,resetWarningCache:r};return s.PropTypes=s,s}},575:(e,t,s)=>{"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},r=function(){function e(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}}(),n=s(43),i=h(n),o=h(s(600)),l=h(s(173)),c=h(s(171)),d=h(s(19)),u=s(671);function h(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.handleClick=s.handleClick.bind(s),s.handleTouchStart=s.handleTouchStart.bind(s),s.handleTouchMove=s.handleTouchMove.bind(s),s.handleTouchEnd=s.handleTouchEnd.bind(s),s.handleFocus=s.handleFocus.bind(s),s.handleBlur=s.handleBlur.bind(s),s.previouslyChecked=!(!e.checked&&!e.defaultChecked),s.state={checked:!(!e.checked&&!e.defaultChecked),hasFocus:!1},s}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidUpdate",value:function(e){e.checked!==this.props.checked&&this.setState({checked:!!this.props.checked})}},{key:"handleClick",value:function(e){if(!this.props.disabled){var t=this.input;if(e.target!==t&&!this.moved)return this.previouslyChecked=t.checked,e.preventDefault(),t.focus(),void t.click();var s=this.props.hasOwnProperty("checked")?this.props.checked:t.checked;this.setState({checked:s})}}},{key:"handleTouchStart",value:function(e){this.props.disabled||(this.startX=(0,u.pointerCoord)(e).x,this.activated=!0)}},{key:"handleTouchMove",value:function(e){if(this.activated&&(this.moved=!0,this.startX)){var t=(0,u.pointerCoord)(e).x;this.state.checked&&t+15<this.startX?(this.setState({checked:!1}),this.startX=t,this.activated=!0):t-15>this.startX&&(this.setState({checked:!0}),this.startX=t,this.activated=t<this.startX+5)}}},{key:"handleTouchEnd",value:function(e){if(this.moved){var t=this.input;if(e.preventDefault(),this.startX){var s=(0,u.pointerCoord)(e).x;!0===this.previouslyChecked&&this.startX+4>s?this.previouslyChecked!==this.state.checked&&(this.setState({checked:!1}),this.previouslyChecked=this.state.checked,t.click()):this.startX-4<s&&this.previouslyChecked!==this.state.checked&&(this.setState({checked:!0}),this.previouslyChecked=this.state.checked,t.click()),this.activated=!1,this.startX=null,this.moved=!1}}}},{key:"handleFocus",value:function(e){var t=this.props.onFocus;t&&t(e),this.setState({hasFocus:!0})}},{key:"handleBlur",value:function(e){var t=this.props.onBlur;t&&t(e),this.setState({hasFocus:!1})}},{key:"getIcon",value:function(e){var s=this.props.icons;return s?void 0===s[e]?t.defaultProps.icons[e]:s[e]:null}},{key:"render",value:function(){var e=this,t=this.props,s=t.className,r=(t.icons,function(e,t){var s={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a]);return s}(t,["className","icons"])),n=(0,o.default)("react-toggle",{"react-toggle--checked":this.state.checked,"react-toggle--focus":this.state.hasFocus,"react-toggle--disabled":this.props.disabled},s);return i.default.createElement("div",{className:n,onClick:this.handleClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd},i.default.createElement("div",{className:"react-toggle-track"},i.default.createElement("div",{className:"react-toggle-track-check"},this.getIcon("checked")),i.default.createElement("div",{className:"react-toggle-track-x"},this.getIcon("unchecked"))),i.default.createElement("div",{className:"react-toggle-thumb"}),i.default.createElement("input",a({},r,{ref:function(t){e.input=t},onFocus:this.handleFocus,onBlur:this.handleBlur,className:"react-toggle-screenreader-only",type:"checkbox"})))}}]),t}(n.PureComponent);t.A=p,p.displayName="Toggle",p.defaultProps={icons:{checked:i.default.createElement(c.default,null),unchecked:i.default.createElement(d.default,null)}},p.propTypes={checked:l.default.bool,disabled:l.default.bool,defaultChecked:l.default.bool,onChange:l.default.func,onFocus:l.default.func,onBlur:l.default.func,className:l.default.string,name:l.default.string,value:l.default.string,id:l.default.string,"aria-labelledby":l.default.string,"aria-label":l.default.string,icons:l.default.oneOfType([l.default.bool,l.default.shape({checked:l.default.node,unchecked:l.default.node})])}},600:(e,t)=>{var s;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var n=typeof s;if("string"===n||"number"===n)e.push(s);else if(Array.isArray(s)){if(s.length){var i=r.apply(null,s);i&&e.push(i)}}else if("object"===n){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){e.push(s.toString());continue}for(var o in s)a.call(s,o)&&s[o]&&e.push(o)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(s=function(){return r}.apply(t,[]))||(e.exports=s)}()},671:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pointerCoord=function(e){if(e){var t=e.changedTouches;if(t&&t.length>0){var s=t[0];return{x:s.clientX,y:s.clientY}}var a=e.pageX;if(void 0!==a)return{x:a,y:e.pageY}}return{x:0,y:0}}},752:(e,t,s)=>{"use strict";s.d(t,{$y:()=>u,AD:()=>i,NI:()=>c,Tc:()=>d,dU:()=>a,or:()=>n,xJ:()=>l});const a={"artists-users":["user-follow-read","user-follow-modify"],"read-saved-tracks-episodes":["user-library-read"],shows:["user-library-read","user-library-modify"],albums:["user-library-read","user-library-modify"],playlists:["playlist-read-private","playlist-modify-public","playlist-modify-private"]},r={ARTIST:"artist",USER:"user",SHOW:"show",ALBUM:"album",PLAYLIST:"playlist"},n=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return[...t.values()].map(e=>r[e])},i={user:"users",artist:"artists",show:"shows",album:"albums",playlist:"playlists"},o={user:"Users",artist:"Artists",show:"Shows",album:"Albums",playlist:"Playlists"},l={user:"User",artist:"Artist",show:"Show",album:"Album",playlist:"Playlist"},c=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return n(...s.sort()).map(t=>e[t]).join(", ")},d=[{label:c(o,"ARTIST"),id:"ARTIST",permission:"artists-users"},{label:c(o,"SHOW"),id:"SHOW",permission:"shows"},{label:c(o,"ALBUM"),id:"ALBUM",permission:"albums"},{label:c(o,"PLAYLIST"),id:"PLAYLIST",permission:"playlists"}],u=function(e){return"succeeded"in e}}}]);
//# sourceMappingURL=109.cb456910.chunk.js.map